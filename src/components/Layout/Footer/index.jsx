import { useMotionValueEvent, useScroll } from "framer-motion";
import Link from "next/link";
import Image from "next/image";
import { motion, useInView, useTransform } from "framer-motion";
import { useEffect, useRef, useState } from "react";
export default function Footer({}) {
  const ref = useRef();
  const { scrollYProgress } = useScroll({
    target: ref,
    offset: ["start end", "end end"],
  });
  const y = useTransform(scrollYProgress, [0, 1], ["100%", "0%"]);
  return (
    <motion.div
      ref={ref}
      className="relative h-[100vh] mt-20 bg-dark text-light"
      style={{ clipPath: "polygon(0% 0, 100% 0%, 100% 100%,0 100%)" }}
    >
      <div className="h-[calc(100vh_+_100vh)] relative -top-[100vh]">
        <motion.div
          style={{ y }}
          className="sticky  h-[100vh] top-[calc(100vh-100vh)] grid grid-cols-10 grid-rows-8 p-5"
        >
          <div className="row-span-5 col-span-5 z-50 relative"></div>
          <div className="row-span-1 col-span-2">
            <p className="uppercase">Sitemap</p>
            <div className="flex flex-col gap-3">
              <FooterLink href="/">Home</FooterLink>
              <FooterLink href="/projects">Projects</FooterLink>
              <FooterLink href="/about">About</FooterLink>
              <FooterLink href="/contact">Contact</FooterLink>
            </div>
          </div>
          <div className="row-span-1 col-span-2">
            <p className="uppercase">Connect</p>
            <div className="flex flex-col gap-3">
              <FooterLink href="/">Twitter</FooterLink>
              <FooterLink href="/projects">Instagram</FooterLink>
              <FooterLink href="/about">LinkedIn</FooterLink>
              <FooterLink href="/contact">Phone</FooterLink>
            </div>
          </div>
          <FooterBranding />
        </motion.div>
      </div>
    </motion.div>
  );
}

function FooterLink({ href, children }) {
  return <Link href={href}>{children}</Link>;
}

function FooterBranding({}) {
  const ref = useRef();
  const isInView = useInView(ref, { amount: 0.4, once: true });
  useEffect(() => {
    console.log("Element is in view: ", isInView);
  }, [isInView]);
  return (
    <div className="col-span-10 row-span-3 flex items-end">
      <svg
        ref={ref}
        viewBox="0 0 3037 449"
        shapeRendering="geometricPrecision"
        textRendering="geometricPrecision"
        xmlns="http://www.w3.org/2000/svg"
      >
        <motion.g
          variants={{
            hidden: { opacity: 1 },
            show: {
              opacity: 1,
              transition: {
                staggerChildren: 0.05,
              },
            },
          }}
          initial="hidden"
          animate={isInView ? "show" : "hidden"}
          style={{ fill: "#fff" }}
        >
          <motion.path
            variants={{
              hidden: { y: "100%" },
              show: {
                y: 0,
                transition: {
                  duration: 0.15,
                },
              },
            }}
            d="M 184.027 435.035 C 201.128 435.035 212.035 431.32 216.746 423.891 C 221.457 416.461 223.813 403.871 223.813 386.122 L 223.813 266.006 L 190.309 266.006 L 190.309 252.384 L 341.077 252.384 L 341.077 266.006 L 320.661 266.006 L 320.661 440.607 L 312.808 440.607 C 306.526 430.288 297.627 425.129 286.11 425.129 C 281.224 425.129 266.653 428.844 242.397 436.274 C 218.142 443.703 197.464 447.418 180.363 447.418 C 123.476 447.418 79.414 429.257 48.179 392.933 C 16.944 356.609 1.326 302.02 1.326 229.166 C 1.326 156.312 17.642 100.072 50.273 60.447 C 82.904 20.821 126.791 1.008 181.933 1.008 C 203.222 1.008 224.599 4.207 246.062 10.606 C 267.525 17.003 280.002 20.202 283.492 20.202 C 286.982 20.202 289.6 19.273 291.345 17.416 C 293.09 15.558 295.009 12.359 297.103 7.819 L 302.862 7.819 L 307.05 142.175 L 297.627 142.175 C 280.526 102.137 263.337 70.663 246.062 47.755 C 228.787 24.846 209.504 13.391 188.215 13.391 C 134.818 13.391 108.12 75.1 108.12 198.519 L 108.12 247.431 C 108.12 309.346 114.664 356.093 127.751 387.67 C 140.838 419.247 159.597 435.035 184.027 435.035 Z"
          />
          <motion.path
            variants={{
              hidden: { y: "100%" },
              show: {
                y: 0,
                transition: {
                  duration: 0.15,
                },
              },
            }}
            d="M 568.795 429.462 L 530.58 295.725 L 426.927 295.725 L 386.617 429.462 L 425.88 429.462 L 425.88 441.227 L 345.784 441.227 L 345.784 429.462 L 370.389 429.462 L 503.881 4.104 L 546.808 4.104 L 678.73 429.462 L 702.811 429.462 L 702.811 441.227 L 531.627 441.227 L 531.627 429.462 L 568.795 429.462 Z M 480.847 119.885 L 431.638 282.104 L 526.392 282.104 L 480.847 119.885 Z"
          />
          <motion.path
            variants={{
              hidden: { y: "100%" },
              show: {
                y: 0,
                transition: {
                  duration: 0.15,
                },
              },
            }}
            d="M 716.949 7.819 L 873.476 7.819 C 921.987 7.819 958.37 15.558 982.626 31.037 C 1006.881 46.516 1019.009 72.624 1019.009 109.36 C 1019.009 165.909 990.216 199.756 932.631 210.902 L 932.631 212.14 C 1002.431 222.459 1037.331 258.37 1037.331 319.873 C 1037.331 364.864 1023.022 396.338 994.404 414.294 C 965.786 432.249 924.604 441.227 870.858 441.227 L 716.949 441.227 L 716.949 429.462 L 750.977 429.462 L 750.977 19.582 L 716.949 19.582 L 716.949 7.819 Z M 853.059 222.046 L 853.059 429.462 L 877.664 429.462 C 896.859 429.462 910.295 421.62 917.973 405.934 C 925.651 390.249 929.49 367.134 929.49 336.589 L 929.49 303.775 C 929.49 276.532 924.779 256.1 915.356 242.478 C 905.933 228.857 889.181 222.046 865.1 222.046 L 853.059 222.046 Z M 853.059 19.582 L 853.059 210.282 L 866.67 210.282 C 884.818 210.282 897.469 203.781 904.624 190.779 C 911.779 177.777 915.356 157.861 915.356 131.03 L 915.356 101.931 C 915.356 71.386 912.215 50.025 905.933 37.848 C 899.651 25.671 887.61 19.582 869.811 19.582 L 853.059 19.582 Z"
          />
          <motion.path
            variants={{
              hidden: { y: "100%" },
              show: {
                y: 0,
                transition: {
                  duration: 0.15,
                },
              },
            }}
            d="M 1222.648 222.046 L 1194.903 222.046 L 1194.903 429.462 L 1228.93 429.462 L 1228.93 441.227 L 1058.793 441.227 L 1058.793 429.462 L 1092.82 429.462 L 1092.82 19.582 L 1058.793 19.582 L 1058.793 7.819 L 1216.89 7.819 C 1262.26 7.819 1294.455 10.605 1313.475 16.177 C 1332.496 21.75 1345.845 28.457 1353.523 36.3 C 1370.275 52.398 1378.651 77.99 1378.651 113.075 C 1378.651 148.16 1371.322 173.236 1356.664 188.302 C 1342.006 203.368 1319.67 212.346 1289.656 215.235 L 1289.656 217.093 C 1317.925 221.633 1337.644 231.54 1348.812 246.813 C 1359.98 262.085 1365.564 287.676 1365.564 323.588 L 1365.564 356.402 C 1365.564 377.866 1366.524 392.313 1368.443 399.743 C 1370.362 407.173 1374.463 410.888 1380.745 410.888 C 1387.027 410.888 1392 407.483 1395.665 400.673 C 1399.33 393.862 1402.732 379.518 1405.873 357.64 L 1414.773 358.879 C 1410.934 393.965 1404.215 417.492 1394.618 429.462 C 1385.021 441.433 1365.913 447.418 1337.295 447.418 C 1308.677 447.418 1288.348 439.472 1276.307 423.581 C 1264.266 407.689 1258.246 377.866 1258.246 334.113 L 1258.246 288.915 C 1258.246 265.8 1255.716 248.876 1250.655 238.144 C 1245.595 227.412 1236.259 222.046 1222.648 222.046 Z M 1194.903 19.582 L 1194.903 210.282 L 1211.655 210.282 C 1231.548 210.282 1246.293 203.059 1255.89 188.612 C 1265.488 174.165 1270.287 150.637 1270.287 118.029 L 1270.287 100.072 C 1270.287 67.464 1265.663 45.897 1256.414 35.372 C 1247.165 24.846 1232.42 19.582 1212.178 19.582 L 1194.903 19.582 Z"
          />
          <motion.path
            variants={{
              hidden: { y: "100%" },
              show: {
                y: 0,
                transition: {
                  duration: 0.15,
                },
              },
            }}
            d="M 1596.942 211.52 L 1671.279 17.726 L 1618.405 17.726 L 1618.405 7.819 L 1721.535 7.819 L 1721.535 17.726 L 1686.984 17.726 L 1607.935 224.523 L 1607.935 429.462 L 1639.869 429.462 L 1639.869 441.227 L 1473.919 441.227 L 1473.919 429.462 L 1505.853 429.462 L 1505.853 236.286 L 1416.858 17.726 L 1392.253 17.726 L 1392.253 7.819 L 1559.773 7.819 L 1559.773 17.726 L 1525.746 17.726 L 1596.942 211.52 Z"
          />
          <motion.path
            variants={{
              hidden: { y: "100%" },
              show: {
                y: 0,
                transition: {
                  duration: 0.15,
                },
              },
            }}
            d="M 1735.668 7.819 L 2007.888 7.819 L 2013.123 130.412 L 2003.7 130.412 C 1989.042 88.722 1973.686 60.137 1957.632 44.658 C 1941.578 29.18 1918.021 21.441 1886.96 21.441 L 1868.637 21.441 L 1868.637 212.758 L 1886.436 212.758 C 1902.839 212.758 1916.625 205.432 1927.793 190.779 C 1938.961 176.126 1946.813 156.416 1951.35 131.65 L 1959.203 131.65 L 1959.203 314.919 L 1950.303 314.919 C 1944.021 283.961 1935.558 261.878 1924.913 248.669 C 1914.269 235.461 1899.698 228.856 1881.201 228.856 L 1868.637 228.856 L 1868.637 427.605 L 1888.53 427.605 C 1920.638 427.605 1947.947 416.254 1970.458 393.551 C 1992.969 370.85 2008.412 341.749 2016.788 306.251 L 2027.258 306.251 L 2023.07 441.227 L 1735.668 441.227 L 1735.668 427.605 L 1766.555 427.605 L 1766.555 21.441 L 1735.668 21.441 L 1735.668 7.819 Z"
          />
          <motion.path
            variants={{
              hidden: { y: "100%" },
              show: {
                y: 0,
                transition: {
                  duration: 0.15,
                },
              },
            }}
            d="M 2062.34 7.819 L 2250.8 7.819 L 2250.8 21.441 L 2195.309 21.441 L 2195.309 427.605 L 2214.155 427.605 C 2243.82 427.605 2267.464 416.873 2285.089 395.409 C 2302.714 373.945 2320.6 340.924 2338.748 296.345 L 2349.741 296.345 L 2339.795 441.227 L 2062.34 441.227 L 2062.34 427.605 L 2093.226 427.605 L 2093.226 21.441 L 2062.34 21.441 L 2062.34 7.819 Z"
          />
          <motion.path
            variants={{
              hidden: { y: "100%" },
              show: {
                y: 0,
                transition: {
                  duration: 0.15,
                },
              },
            }}
            d="M 2374.34 7.819 L 2562.8 7.819 L 2562.8 21.441 L 2507.309 21.441 L 2507.309 427.605 L 2526.155 427.605 C 2555.82 427.605 2579.464 416.873 2597.089 395.409 C 2614.714 373.945 2632.6 340.924 2650.748 296.345 L 2661.741 296.345 L 2651.795 441.227 L 2374.34 441.227 L 2374.34 427.605 L 2405.226 427.605 L 2405.226 21.441 L 2374.34 21.441 L 2374.34 7.819 Z"
          />
          <motion.path
            variants={{
              hidden: { y: "100%" },
              show: {
                y: 0,
                transition: {
                  duration: 0.15,
                },
              },
            }}
            d="M 2901.514 429.462 L 2863.299 295.725 L 2759.646 295.725 L 2719.336 429.462 L 2758.599 429.462 L 2758.599 441.227 L 2678.503 441.227 L 2678.503 429.462 L 2703.108 429.462 L 2836.6 4.104 L 2879.527 4.104 L 3011.449 429.462 L 3035.53 429.462 L 3035.53 441.227 L 2864.346 441.227 L 2864.346 429.462 L 2901.514 429.462 Z M 2813.566 119.885 L 2764.357 282.104 L 2859.111 282.104 L 2813.566 119.885 Z"
          />
        </motion.g>
      </svg>
    </div>
  );
}
